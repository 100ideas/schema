# Stencila schemas, protocols and other specs

![Status](https://img.shields.io/badge/status-draft-orange.svg)
[![Build](https://travis-ci.org/stencila/schema.svg?branch=master)](https://travis-ci.org/stencila/schema)
[![Netlify](https://img.shields.io/netlify/b0e0d714-29f1-4ad1-8a7d-1af7799fb85b)](https://app.netlify.com/sites/stencila-schema/deploys)
[![Code coverage](https://codecov.io/gh/stencila/schema/branch/master/graph/badge.svg)](https://codecov.io/gh/stencila/schema)
[![NPM](http://img.shields.io/npm/v/@stencila/schema.svg?style=flat)](https://www.npmjs.com/package/@stencila/schema)
[![Docs](https://img.shields.io/badge/docs-latest-blue.svg)](https://stencila.github.io/schema/)
[![Community](https://img.shields.io/badge/join-community-green.svg)](https://community.stenci.la)
[![Chat](https://badges.gitter.im/stencila/stencila.svg)](https://gitter.im/stencila/stencila)

> :sparkles:
> This is a **work in progress**. But comments, suggestions, and pull requests are very much appreciated
> :sparkles:

---

# #100ideas fork: `jank-doc-builder` (2019-09-24)

just wanted to read the docs, but they wouldn't compile. problems & solutions that got it working locally:

- [`./schema/CodeChunk.md#75`](./schema/CodeChunk.md#75`): the fenced `yaml import=pythonFunction` "CodeChunk" beginning on this line was crashing encoda, something related to it not understanding `{schema: {type: StringSchema}}`. temporarily cured crash by turning the section into a `<pre>` via indentation.

- encoda was a bit out of date. was hoping upgrading from `^0.61.2` to `^0.78.0` would resolve the first issue, but no.

- was missing eslint & prettier. added to this repos devDeps in package.json.

- was suspicious of `package-lock.json`, so removed it and let npm regenerate it.

new code:

- I decided to dig into this to get some hands on experience with `@stencila/schema`, and some docs to boot.

- Noticed that not all of the `Types` have dedicated `schema/<Type>.md` markdown documentation file, and thus not all types get HTML pages.

  - but during doc compiliation a `public/<Type>.schema.md` file is generated for each `schema/<Type>.schema.yaml`.
  - So experimented with using the contents of the autogenerated `<type>.schema.md` file in place of `schema/<Type>.md` if it wasn't found.
  - seems to work alright! it at least helped me feel more confident I was seeing most/all of the types when browsing the html docs.

- then noticed that not many of the `schema/<Type>.md` docs include examples. Could examples be harvested from `examples/<type>/*.<type>.yaml` and added to the html page as well?
  - appears to be yes
  - all "matching" .yaml files for a type from `examples/**` are now transcluded into the bottom of the html file for that type, regardless of if it already had some or not.
  - the glob i'm using to match example files to the title of a Type is not sophisticated, so missing some examples that are idiosyncratically named
  - why this naming: all example subdirectories are written with the types name in `camelCase`, but the type name seems to normally be in `PascalCase` throughout the rest of the app. ??

**conclusion**:
I just wanted to look at html docs for the schema package and play around with it on the way. This fork compiles the docs on my laptop, and also includes some janky hacks as detailed above. If you want to check the docs out, grab the `2019-09-23_stencila-schema-jank-htmldocs.zip` file in the repo root. Otherwise, I am not proposing merging any of this into the upstream repo.

p.s. - what's with all the `<Type>.html.media/` folders generated in the html doc root folder (`dist/`)? kind of distracting.

---

<!-- Automatically generated TOC. Don't edit, `make docs` instead>

<!-- toc -->

- [Documentation](#documentation)
- [JSON Schema definitions](#json-schema-definitions)
- [JSON-LD context](#json-ld-context)
- [Typescript type definitions](#typescript-type-definitions)

<!-- tocstop -->

This repository aims to document, and provide reference implementations for, the schemas, protocols and other specifications used in Stencila.

As much as possible, we use existing specifications, and avoid defining any new ones. External specifications that we currently use, or plan to use, include [Apache Avro], [JSON-LD], [JSON-RPC], [JSON-Schema], [Schema.org], [BioSchemas], [CodeMeta] and [OpenSchemas]. In many ways, this repository simply documents how these existing standards are utilised within Stencila.

## Documentation

Documentation is available at https://schema.stenci.la/.

## JSON Schema definitions

JSON Schemas are defined in the [`schema`](schema) directory.

## JSON-LD context

A JSON-LD `@context` is generated from the JSON Schema sources is available at https://schema.stenci.la/stencila.jsonld.

## Typescript type definitions

Typescript type definitions are generated from the JSON Schema sources and can be used by installing the Node.js package:

```bash
npm install @stencila/schema --save
```

[apache avro]: (https://avro.apache.org)
[bioschemas]: (https://bioschemas.org)
[codemeta]: (https://codemeta.github.io)
[json-ld]: (https://json-ld.org)
[json-rpc]: (https://www.jsonrpc.org)
[json-schema]: (https://json-schema.org)
[openschemas]: (https://openschemas.github.io)
[schema.org]: (https://schema.org)
