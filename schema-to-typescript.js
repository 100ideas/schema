const path = require('path')

const fs = require('fs-extra')
const jstt = require('json-schema-to-typescript')
 
const options = {
  bannerComment: `/* tslint:disable */
/**
 * This file was automatically generated by \`schema-to-typescript.js\`.
 * Do not modify it by hand. Instead, modify the source \`.schema.json\` file
 * in the \`schema\` directory and run \`node schema-to-typescript.js\`
 * to regenerate this file.
 */`
}

fs.mkdirp('ts')
for (let filename of fs.readdirSync('schema')) {
  const src = path.join('schema', filename)
  const dest = path.join('schema', filename)
  console.log(`Generating "${dest}" from "${filename}"`)
  const schema = fs.readJsonSync(src)
  jstt.compileFromFile(schema, options).then(ts => fs.writeFileSync(dest, ts))
}
